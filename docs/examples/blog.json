{
  "version": "1.0",
  "database": {
    "name": "blog_db",
    "encoding": "UTF8",
    "locale": "en_US.utf8"
  },
  "tables": {
    "authors": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "username",
          "type": "varchar(50)",
          "nullable": false
        },
        {
          "name": "email",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "full_name",
          "type": "varchar(200)",
          "nullable": false
        },
        {
          "name": "bio",
          "type": "text",
          "nullable": true
        },
        {
          "name": "avatar_url",
          "type": "varchar(500)",
          "nullable": true
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": ["active", "inactive", "suspended"],
            "weights": [85, 10, 5]
          }
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updated_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "unique_constraints": [
        {
          "columns": ["username"]
        },
        {
          "columns": ["email"]
        }
      ],
      "row_count": 50
    },
    "categories": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "slug",
          "type": "varchar(100)",
          "nullable": false,
          "generator": "pattern",
          "generator_config": {
            "pattern": "[a-z]{5,15}"
          }
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "parent_id",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["parent_id"],
          "referenced_table": "categories",
          "referenced_columns": ["id"],
          "on_delete": "SET NULL"
        }
      ],
      "unique_constraints": [
        {
          "columns": ["slug"]
        }
      ],
      "row_count": 20
    },
    "posts": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "author_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "category_id",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "title",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "slug",
          "type": "varchar(255)",
          "nullable": false,
          "generator": "pattern",
          "generator_config": {
            "pattern": "[a-z0-9-]{10,30}"
          }
        },
        {
          "name": "excerpt",
          "type": "text",
          "nullable": true
        },
        {
          "name": "content",
          "type": "text",
          "nullable": false
        },
        {
          "name": "featured_image",
          "type": "varchar(500)",
          "nullable": true
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": ["draft", "published", "archived"],
            "weights": [15, 80, 5]
          }
        },
        {
          "name": "view_count",
          "type": "integer",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 0,
            "max": 10000
          }
        },
        {
          "name": "published_at",
          "type": "timestamp",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updated_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["author_id"],
          "referenced_table": "authors",
          "referenced_columns": ["id"],
          "on_delete": "RESTRICT"
        },
        {
          "columns": ["category_id"],
          "referenced_table": "categories",
          "referenced_columns": ["id"],
          "on_delete": "SET NULL"
        }
      ],
      "unique_constraints": [
        {
          "columns": ["slug"]
        }
      ],
      "indexes": [
        {
          "columns": ["author_id"]
        },
        {
          "columns": ["category_id"]
        },
        {
          "columns": ["status"]
        },
        {
          "columns": ["published_at"]
        }
      ],
      "row_count": 500
    },
    "comments": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "post_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "author_name",
          "type": "varchar(200)",
          "nullable": false
        },
        {
          "name": "author_email",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "content",
          "type": "text",
          "nullable": false
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": ["approved", "pending", "spam"],
            "weights": [80, 15, 5]
          }
        },
        {
          "name": "parent_id",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["post_id"],
          "referenced_table": "posts",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        },
        {
          "columns": ["parent_id"],
          "referenced_table": "comments",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "columns": ["post_id"]
        },
        {
          "columns": ["status"]
        }
      ],
      "row_count": 2000
    },
    "tags": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(50)",
          "nullable": false
        },
        {
          "name": "slug",
          "type": "varchar(50)",
          "nullable": false,
          "generator": "pattern",
          "generator_config": {
            "pattern": "[a-z]{3,10}"
          }
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "unique_constraints": [
        {
          "columns": ["slug"]
        }
      ],
      "row_count": 100
    },
    "post_tags": {
      "columns": [
        {
          "name": "post_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "tag_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["post_id", "tag_id"],
      "foreign_keys": [
        {
          "columns": ["post_id"],
          "referenced_table": "posts",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        },
        {
          "columns": ["tag_id"],
          "referenced_table": "tags",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        }
      ],
      "row_count": 1500
    }
  }
}
