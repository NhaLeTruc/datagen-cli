{
  "version": "1.0",
  "database": {
    "name": "ecommerce_db",
    "encoding": "UTF8",
    "locale": "en_US.utf8"
  },
  "tables": {
    "categories": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "parent_id",
          "type": "integer",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["parent_id"],
          "referenced_table": "categories",
          "referenced_columns": ["id"],
          "on_delete": "SET NULL"
        }
      ],
      "row_count": 50
    },
    "customers": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "email",
          "type": "varchar(255)",
          "nullable": false
        },
        {
          "name": "first_name",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "last_name",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "phone",
          "type": "varchar(20)",
          "nullable": true
        },
        {
          "name": "address",
          "type": "text",
          "nullable": true
        },
        {
          "name": "city",
          "type": "varchar(100)",
          "nullable": true
        },
        {
          "name": "state",
          "type": "varchar(100)",
          "nullable": true
        },
        {
          "name": "postal_code",
          "type": "varchar(20)",
          "nullable": true
        },
        {
          "name": "country",
          "type": "varchar(100)",
          "nullable": true
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updated_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "unique_constraints": [
        {
          "columns": ["email"]
        }
      ],
      "row_count": 1000
    },
    "products": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "category_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "name",
          "type": "varchar(200)",
          "nullable": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true
        },
        {
          "name": "sku",
          "type": "varchar(50)",
          "nullable": false,
          "generator": "pattern",
          "generator_config": {
            "pattern": "PRD-[0-9]{8}"
          }
        },
        {
          "name": "price",
          "type": "numeric(10,2)",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 999,
            "max": 999999
          }
        },
        {
          "name": "stock_quantity",
          "type": "integer",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 0,
            "max": 1000
          }
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": ["active", "inactive", "out_of_stock"],
            "weights": [80, 15, 5]
          }
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updated_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["category_id"],
          "referenced_table": "categories",
          "referenced_columns": ["id"],
          "on_delete": "RESTRICT"
        }
      ],
      "unique_constraints": [
        {
          "columns": ["sku"]
        }
      ],
      "row_count": 500
    },
    "orders": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "customer_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "order_number",
          "type": "varchar(50)",
          "nullable": false,
          "generator": "template",
          "generator_config": {
            "template": "ORD-{{year}}-{{seq:6}}"
          }
        },
        {
          "name": "status",
          "type": "varchar(20)",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": ["pending", "processing", "shipped", "delivered", "cancelled"],
            "weights": [10, 20, 30, 35, 5]
          }
        },
        {
          "name": "total_amount",
          "type": "numeric(10,2)",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 1000,
            "max": 100000
          }
        },
        {
          "name": "shipping_address",
          "type": "text",
          "nullable": false
        },
        {
          "name": "shipping_city",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "shipping_state",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "shipping_postal_code",
          "type": "varchar(20)",
          "nullable": false
        },
        {
          "name": "shipping_country",
          "type": "varchar(100)",
          "nullable": false
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        },
        {
          "name": "updated_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["customer_id"],
          "referenced_table": "customers",
          "referenced_columns": ["id"],
          "on_delete": "RESTRICT"
        }
      ],
      "unique_constraints": [
        {
          "columns": ["order_number"]
        }
      ],
      "row_count": 2000
    },
    "order_items": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "order_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "product_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "quantity",
          "type": "integer",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 1,
            "max": 10
          }
        },
        {
          "name": "unit_price",
          "type": "numeric(10,2)",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 999,
            "max": 999999
          }
        },
        {
          "name": "subtotal",
          "type": "numeric(10,2)",
          "nullable": false,
          "generator": "integer_range",
          "generator_config": {
            "min": 1000,
            "max": 100000
          }
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["order_id"],
          "referenced_table": "orders",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        },
        {
          "columns": ["product_id"],
          "referenced_table": "products",
          "referenced_columns": ["id"],
          "on_delete": "RESTRICT"
        }
      ],
      "row_count": 5000
    },
    "reviews": {
      "columns": [
        {
          "name": "id",
          "type": "serial",
          "nullable": false
        },
        {
          "name": "product_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "customer_id",
          "type": "integer",
          "nullable": false
        },
        {
          "name": "rating",
          "type": "integer",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": [1, 2, 3, 4, 5],
            "weights": [5, 5, 15, 35, 40]
          }
        },
        {
          "name": "title",
          "type": "varchar(200)",
          "nullable": true
        },
        {
          "name": "comment",
          "type": "text",
          "nullable": true
        },
        {
          "name": "verified_purchase",
          "type": "boolean",
          "nullable": false,
          "generator": "weighted_enum",
          "generator_config": {
            "values": [true, false],
            "weights": [85, 15]
          }
        },
        {
          "name": "created_at",
          "type": "timestamp",
          "nullable": false
        }
      ],
      "primary_key": ["id"],
      "foreign_keys": [
        {
          "columns": ["product_id"],
          "referenced_table": "products",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        },
        {
          "columns": ["customer_id"],
          "referenced_table": "customers",
          "referenced_columns": ["id"],
          "on_delete": "CASCADE"
        }
      ],
      "row_count": 1500
    }
  }
}
